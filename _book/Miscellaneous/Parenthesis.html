
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Parenthesis Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="AlienDictionary.html" />
    
    
    <link rel="prev" href="Intervals.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../GeneralInstructions.html">
            
                <a href="../GeneralInstructions.html">
            
                    
                    General Instructions
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../Algorithms/">
            
                <a href="../Algorithms/">
            
                    
                    ðŸ“¢ TO DO
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Algorithms</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../Algorithms/SortingAndHashing.html">
            
                <a href="../Algorithms/SortingAndHashing.html">
            
                    
                    Sorting and Hashing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../Algorithms/BFS.html">
            
                <a href="../Algorithms/BFS.html">
            
                    
                    BFS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../Algorithms/Backtracking.html">
            
                <a href="../Algorithms/Backtracking.html">
            
                    
                    Backtracking and Complete Search
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="../Algorithms/BinarySearch.html">
            
                <a href="../Algorithms/BinarySearch.html">
            
                    
                    Binary Search
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="../Algorithms/Games.html">
            
                <a href="../Algorithms/Games.html">
            
                    
                    Games
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="../Algorithms/Bitwise.html">
            
                <a href="../Algorithms/Bitwise.html">
            
                    
                    Bitwise
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.7" data-path="../Algorithms/DP/">
            
                <a href="../Algorithms/DP/">
            
                    
                    DP
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.7.1" data-path="../Algorithms/DP/Knapsack.html">
            
                <a href="../Algorithms/DP/Knapsack.html">
            
                    
                    Knapsack
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.7.2" data-path="../Algorithms/DP/NumSol.html">
            
                <a href="../Algorithms/DP/NumSol.html">
            
                    
                    Number of Solutions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.8" data-path="../Algorithms/UncommonAlgos.html">
            
                <a href="../Algorithms/UncommonAlgos.html">
            
                    
                    Uncommon Algos
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Data Structures</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../DataStructures/StacksAndQueues/">
            
                <a href="../DataStructures/StacksAndQueues/">
            
                    
                    Stacks and Queues
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="../DataStructures/Arrays/">
            
                <a href="../DataStructures/Arrays/">
            
                    
                    Arrays
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.2.1" data-path="../DataStructures/Arrays/TwoPointers.html">
            
                <a href="../DataStructures/Arrays/TwoPointers.html">
            
                    
                    Two Pointers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2.2" data-path="../DataStructures/Arrays/Subarrays.html">
            
                <a href="../DataStructures/Arrays/Subarrays.html">
            
                    
                    Subarrays
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2.3" data-path="../DataStructures/Arrays/Subsets.html">
            
                <a href="../DataStructures/Arrays/Subsets.html">
            
                    
                    Subsets
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2.4" data-path="../DataStructures/Arrays/Triplets.html">
            
                <a href="../DataStructures/Arrays/Triplets.html">
            
                    
                    Triplets
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2.5" data-path="../DataStructures/Arrays/StackTricks.html">
            
                <a href="../DataStructures/Arrays/StackTricks.html">
            
                    
                    Stack Tricks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2.6" data-path="../DataStructures/Arrays/MultipleArrays.html">
            
                <a href="../DataStructures/Arrays/MultipleArrays.html">
            
                    
                    Multiple Arrays
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2.7" data-path="../DataStructures/Arrays/LeftAndRight.html">
            
                <a href="../DataStructures/Arrays/LeftAndRight.html">
            
                    
                    Left and right
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="../DataStructures/Strings/">
            
                <a href="../DataStructures/Strings/">
            
                    
                    Strings
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.3.1" data-path="../DataStructures/Strings/StandardQuestions.html">
            
                <a href="../DataStructures/Strings/StandardQuestions.html">
            
                    
                    Standard Questions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="../DataStructures/LinkedLists/">
            
                <a href="../DataStructures/LinkedLists/">
            
                    
                    Linked Lists
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="../DataStructures/Trees/">
            
                <a href="../DataStructures/Trees/">
            
                    
                    Trees
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.5.1" data-path="../DataStructures/Trees/Inorder.html">
            
                <a href="../DataStructures/Trees/Inorder.html">
            
                    
                    Inorder Traversal
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.5.2" data-path="../DataStructures/Trees/Preorder.html">
            
                <a href="../DataStructures/Trees/Preorder.html">
            
                    
                    Preorder Traversal
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.5.3" data-path="../DataStructures/Trees/Postorder.html">
            
                <a href="../DataStructures/Trees/Postorder.html">
            
                    
                    Postorder Traversal
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.5.4" data-path="../DataStructures/Trees/LevelWise.html">
            
                <a href="../DataStructures/Trees/LevelWise.html">
            
                    
                    Level-wise Traversal
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.5.5" data-path="../Datastructures/Trees/TreeToGraph.html">
            
                <a href="../Datastructures/Trees/TreeToGraph.html">
            
                    
                    Tree to Graph
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.5.6" data-path="../DataStructures/Trees/TwoTrees.html">
            
                <a href="../DataStructures/Trees/TwoTrees.html">
            
                    
                    Two Trees
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.5.7" data-path="../DataStructures/Trees/ConstructTree.html">
            
                <a href="../DataStructures/Trees/ConstructTree.html">
            
                    
                    Construct Trees
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.6" data-path="../DataStructures/Graphs/">
            
                <a href="../DataStructures/Graphs/">
            
                    
                    Graphs
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.6.1" data-path="../DataStructures/Graphs/Coloring.html">
            
                <a href="../DataStructures/Graphs/Coloring.html">
            
                    
                    Coloring
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.6.2" data-path="../DataStructures/Graphs/GraphBFS.html">
            
                <a href="../DataStructures/Graphs/GraphBFS.html">
            
                    
                    Graph BFS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.6.3" data-path="../DataStructures/Graphs/GraphDFS.html">
            
                <a href="../DataStructures/Graphs/GraphDFS.html">
            
                    
                    Graph DFS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.6.4" data-path="../DataStructures/Graphs/TopologySort.html">
            
                <a href="../DataStructures/Graphs/TopologySort.html">
            
                    
                    Topology Sort
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.7" data-path="../DataStructures/Heap.html">
            
                <a href="../DataStructures/Heap.html">
            
                    
                    Heap
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.8" data-path="../DataStructures/Grid.html">
            
                <a href="../DataStructures/Grid.html">
            
                    
                    Grid
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Miscellaneous</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="Palindrome.html">
            
                <a href="Palindrome.html">
            
                    
                    Palindrome
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="Stocks.html">
            
                <a href="Stocks.html">
            
                    
                    Stocks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="Intervals.html">
            
                <a href="Intervals.html">
            
                    
                    Intervals
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="5.4" data-path="Parenthesis.html">
            
                <a href="Parenthesis.html">
            
                    
                    Parenthesis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.5" data-path="AlienDictionary.html">
            
                <a href="AlienDictionary.html">
            
                    
                    Alien Dictionary
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.6" data-path="InterestingMiscellaneous.html">
            
                <a href="InterestingMiscellaneous.html">
            
                    
                    Interesting Miscellaneous
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Tips</li>
        
        
    
        <li class="chapter " data-level="6.1" data-path="../Tricks/">
            
                <a href="../Tricks/">
            
                    
                    Tricks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="../OOP/designs.html">
            
                <a href="../OOP/designs.html">
            
                    
                    OOP designs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.3" data-path="../BehavioralQuestions.html">
            
                <a href="../BehavioralQuestions.html">
            
                    
                    Behavioral Questions
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Parenthesis</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h3 id="parenthesis-questions">Parenthesis questions</h3>
<ul>
<li><a href="https://leetcode.com/problems/valid-parentheses/" target="_blank">https://leetcode.com/problems/valid-parentheses/</a></li>
<li><a href="https://leetcode.com/problems/generate-parentheses/" target="_blank">https://leetcode.com/problems/generate-parentheses/</a></li>
<li><a href="https://leetcode.com/problems/valid-parenthesis-string/" target="_blank">https://leetcode.com/problems/valid-parenthesis-string/</a></li>
<li><a href="https://leetcode.com/problems/minimum-remove-to-make-valid-parentheses/" target="_blank">https://leetcode.com/problems/minimum-remove-to-make-valid-parentheses/</a></li>
<li><a href="https://leetcode.com/problems/minimum-add-to-make-parentheses-valid/" target="_blank">https://leetcode.com/problems/minimum-add-to-make-parentheses-valid/</a></li>
<li><a href="https://leetcode.com/problems/remove-outermost-parentheses/" target="_blank">https://leetcode.com/problems/remove-outermost-parentheses/</a></li>
</ul>
<h4 id="valid-parenthesis-">Valid parenthesis <br></h4>
<p>Simple idea. Push to the stack if it&apos;s an open one; pop if it&apos;s a matching closing one. <br>
If the stack is empty and we encounter a closed one, that&apos;s an instant <code>False</code></p>
<h4 id="generate-parentheses">Generate parentheses</h4>
<p>Keep a count of open and closed ones. <br>
Success cases: string length 2 <em> n and stack == 0 <br>
Failure cases: string length 2 </em> n and stack != 0 OR stack &lt; 0 OR stack &gt; n <br>
We just backtrack:</p>
<pre><code class="lang-py">            backtrack(current + <span class="hljs-string">&apos;(&apos;</span>, stack + <span class="hljs-number">1</span>)
            backtrack(current + <span class="hljs-string">&apos;)&apos;</span>, stack - <span class="hljs-number">1</span>)
</code></pre>
<h4 id="valid-parenthesis-string">Valid parenthesis string</h4>
<p>Backtrack different possibilities <br>
&apos;*&apos; comes in every backtrack call based on character <br>
Top-down backtrack is very intuitive</p>
<pre><code class="lang-py">
            memo[(i, stack)] = <span class="hljs-keyword">False</span>

            <span class="hljs-keyword">if</span> s[i] <span class="hljs-keyword">in</span> [<span class="hljs-string">&apos;(&apos;</span>, <span class="hljs-string">&apos;*&apos;</span>]:
                memo[(i, stack)] = memo[(i, stack)] <span class="hljs-keyword">or</span> \
                                   backtrack(i + <span class="hljs-number">1</span>, stack + <span class="hljs-number">1</span>)

            <span class="hljs-keyword">if</span> s[i] == <span class="hljs-string">&apos;*&apos;</span>:
                memo[(i, stack)] = memo[(i, stack)] <span class="hljs-keyword">or</span> \
                                   backtrack(i + <span class="hljs-number">1</span>, stack)

            <span class="hljs-keyword">if</span> s[i] <span class="hljs-keyword">in</span> [<span class="hljs-string">&apos;)&apos;</span>, <span class="hljs-string">&apos;*&apos;</span>]:
                <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> stack:
                    <span class="hljs-keyword">return</span> memo[(i, stack)]

                memo[(i, stack)] = memo[(i, stack)] <span class="hljs-keyword">or</span> \
                                   backtrack(i + <span class="hljs-number">1</span>, stack - <span class="hljs-number">1</span>)
</code></pre>
<p><a href="https://leetcode.com/problems/generate-parentheses/" target="_blank">https://leetcode.com/problems/generate-parentheses/</a></p>
<pre><code class="lang-py"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">generateParenthesis</span><span class="hljs-params">(self, n: int)</span> -&gt; List[str]:</span>
        result = []
        limit = <span class="hljs-number">2</span> * n

        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">backtrack</span><span class="hljs-params">(index=<span class="hljs-number">0</span>, current=<span class="hljs-string">&quot;&quot;</span>, _open=<span class="hljs-number">0</span>, _close=<span class="hljs-number">0</span>)</span>:</span>
            <span class="hljs-keyword">if</span> index == limit:
                <span class="hljs-keyword">if</span> _open == _close:
                    result.append(current)
                <span class="hljs-keyword">return</span>

            <span class="hljs-keyword">if</span> (_open &gt; n) <span class="hljs-keyword">or</span> (_close &gt; n) <span class="hljs-keyword">or</span> (_close &gt; _open):
                <span class="hljs-keyword">return</span>

            <span class="hljs-comment"># open bracket</span>
            backtrack(index+<span class="hljs-number">1</span>, current + <span class="hljs-string">&apos;(&apos;</span>, _open+<span class="hljs-number">1</span>, _close)

            <span class="hljs-comment"># close bracket</span>
            backtrack(index+<span class="hljs-number">1</span>, current + <span class="hljs-string">&apos;)&apos;</span>, _open, _close+<span class="hljs-number">1</span>)

        backtrack()
        <span class="hljs-keyword">return</span> result
</code></pre>
<p><a href="https://leetcode.com/problems/minimum-remove-to-make-valid-parentheses/" target="_blank">https://leetcode.com/problems/minimum-remove-to-make-valid-parentheses/</a> <br>
The ones that need to be removed are:</p>
<ol>
<li>close brakets that come when there was no open one before it </li>
<li><p>open ones that don&apos;t have a close one after them
Just need to find them and replace with an empty string. <br>
Set is interchangable with list here because we don&apos;t care what open bracket a close one matches with; we&apos;d just pop</p>
<pre><code class="lang-py"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span>
 <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">minRemoveToMakeValid</span><span class="hljs-params">(self, s: str)</span> -&gt; str:</span>
     open_brackets = []
     s_list = [c <span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> s]

     <span class="hljs-keyword">for</span> i, c <span class="hljs-keyword">in</span> enumerate(s):
         <span class="hljs-keyword">if</span> c == <span class="hljs-string">&apos;(&apos;</span>:
             open_brackets.append(i)
             s_list[i] = <span class="hljs-string">&apos;&apos;</span>
         <span class="hljs-keyword">elif</span> c == <span class="hljs-string">&apos;)&apos;</span>:
             <span class="hljs-keyword">if</span> open_brackets:
                 s_list[open_brackets.pop()] = <span class="hljs-string">&apos;(&apos;</span>
                 s_list[i] = <span class="hljs-string">&apos;)&apos;</span>
             <span class="hljs-keyword">else</span>:
                 s_list[i] = <span class="hljs-string">&apos;&apos;</span>

     <span class="hljs-keyword">return</span> <span class="hljs-string">&apos;&apos;</span>.join(s_list)
</code></pre>
<p><a href="https://leetcode.com/problems/minimum-add-to-make-parentheses-valid/" target="_blank">https://leetcode.com/problems/minimum-add-to-make-parentheses-valid/</a> <br>
A closed bracket without a corresponding opening one, can never to balanced afterwards, irrespective of what comes after <br>
An open bracket can be matched by a closed one immediately.</p>
<pre><code class="lang-py"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span>
 <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">minAddToMakeValid</span><span class="hljs-params">(self, S: str)</span> -&gt; int:</span>
     open_brackets = <span class="hljs-number">0</span>
     closed_brackets = <span class="hljs-number">0</span>

     <span class="hljs-keyword">for</span> i, s <span class="hljs-keyword">in</span> enumerate(S):
         <span class="hljs-keyword">if</span> s == <span class="hljs-string">&apos;(&apos;</span>:
             open_brackets += <span class="hljs-number">1</span>
         <span class="hljs-keyword">else</span>:
             <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> open_brackets:
                 closed_brackets += <span class="hljs-number">1</span>
             <span class="hljs-keyword">else</span>:
                 open_brackets -= <span class="hljs-number">1</span>

     <span class="hljs-keyword">return</span> open_brackets + closed_brackets
</code></pre>
<p><a href="https://leetcode.com/problems/remove-outermost-parentheses/" target="_blank">https://leetcode.com/problems/remove-outermost-parentheses/</a></p>
<pre><code class="lang-py"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span>
 <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">removeOuterParentheses</span><span class="hljs-params">(self, S: str)</span> -&gt; str:</span>
     stack = []
     start = <span class="hljs-number">0</span>
     result = <span class="hljs-string">&quot;&quot;</span>

     <span class="hljs-keyword">for</span> i, c <span class="hljs-keyword">in</span> enumerate(S):
         <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> stack:
             start = i

         <span class="hljs-keyword">if</span> c == <span class="hljs-string">&apos;(&apos;</span>:
             stack.append(c)
         <span class="hljs-keyword">else</span>:
             stack.pop()

         <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> stack:
             result += S[start + <span class="hljs-number">1</span>: i]

     <span class="hljs-keyword">return</span> result
</code></pre>
<p><a href="https://leetcode.com/problems/remove-invalid-parentheses/" target="_blank">https://leetcode.com/problems/remove-invalid-parentheses/</a> <br>
This is a combination of two problems: first identify the number of removals required and then generate strings with backtracking <br>
<code>net</code> is basically <code>number of open brackets - number of closed brackets</code> <br>
Then it is just a matter of pruning the tree and finding the optimal solution</p>
<pre><code class="lang-py"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span>
 <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">removeInvalidParentheses</span><span class="hljs-params">(self, s: str)</span> -&gt; List[str]:</span>
     net, removal = <span class="hljs-number">0</span>, <span class="hljs-number">0</span>
     result = set()
     visited = set()

     <span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> s:
         <span class="hljs-comment"># find the minimum number of removals to be made</span>
         <span class="hljs-keyword">if</span> c == <span class="hljs-string">&apos;(&apos;</span>:
             net += <span class="hljs-number">1</span>
         <span class="hljs-keyword">elif</span> c == <span class="hljs-string">&apos;)&apos;</span>:
             net -= <span class="hljs-number">1</span>

         <span class="hljs-keyword">if</span> net == <span class="hljs-number">-1</span>:
             net = <span class="hljs-number">0</span>
             removal += <span class="hljs-number">1</span>
     removal += net

     <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">construct</span><span class="hljs-params">(index, net, string, removals)</span>:</span>
         <span class="hljs-keyword">if</span> (string, removals) <span class="hljs-keyword">in</span> visited:
             <span class="hljs-keyword">return</span> 
         <span class="hljs-keyword">else</span>:
             visited.add((string, removals))

         <span class="hljs-keyword">if</span> removals == <span class="hljs-number">-1</span>:
             <span class="hljs-keyword">return</span>

         <span class="hljs-keyword">if</span> index == len(s):
             <span class="hljs-comment"># we found the solution</span>
             <span class="hljs-keyword">if</span> net == <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> removals == <span class="hljs-number">0</span>:
                 result.add(string)
             <span class="hljs-keyword">return</span>

         <span class="hljs-keyword">if</span> s[index] == <span class="hljs-string">&apos;(&apos;</span>:
             <span class="hljs-comment"># include open bracket</span>
             construct(index + <span class="hljs-number">1</span>, net + <span class="hljs-number">1</span>, string + <span class="hljs-string">&apos;(&apos;</span>, removals)

         <span class="hljs-keyword">if</span> s[index] == <span class="hljs-string">&apos;)&apos;</span>:
             <span class="hljs-comment"># include </span>
             <span class="hljs-keyword">if</span> net &gt; <span class="hljs-number">0</span>:
                 construct(index + <span class="hljs-number">1</span>, net - <span class="hljs-number">1</span>, string + <span class="hljs-string">&apos;)&apos;</span>, removals)

         <span class="hljs-keyword">if</span> s[index] <span class="hljs-keyword">in</span> [<span class="hljs-string">&apos;(&apos;</span>, <span class="hljs-string">&apos;)&apos;</span>]:
             <span class="hljs-comment"># exclude brackets</span>
             construct(index + <span class="hljs-number">1</span>, net, string, removals - <span class="hljs-number">1</span>)
         <span class="hljs-keyword">else</span>:
             <span class="hljs-comment"># normal character</span>
             construct(index + <span class="hljs-number">1</span>, net, string + s[index], removals)

     construct(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-string">&apos;&apos;</span>, removal)
     <span class="hljs-keyword">return</span> result
</code></pre>
<p><a href="https://leetcode.com/problems/longest-valid-parentheses/" target="_blank">https://leetcode.com/problems/longest-valid-parentheses/</a> <br>
start from this state: <code>[-1]</code> <br>
Only unbalanced state will empty the stack, push that index to be the boundary <br></p>
<pre><code class="lang-py"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span>
 <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">longestValidParentheses</span><span class="hljs-params">(self, s: str)</span> -&gt; int:</span>
     stack = [<span class="hljs-number">-1</span>]
     max_len = <span class="hljs-number">0</span>

     <span class="hljs-keyword">for</span> i, c <span class="hljs-keyword">in</span> enumerate(s):
         <span class="hljs-keyword">if</span> c == <span class="hljs-string">&apos;(&apos;</span>:
             stack.append(i)
             <span class="hljs-keyword">continue</span>

         stack.pop()
         <span class="hljs-keyword">if</span> stack:
             max_len = max(max_len, i - stack[<span class="hljs-number">-1</span>])
         <span class="hljs-keyword">else</span>:
             stack.append(i)

     <span class="hljs-keyword">return</span> max_len
</code></pre>
<p><a href="https://leetcode.com/problems/score-of-parentheses/" target="_blank">https://leetcode.com/problems/score-of-parentheses/</a> <br>
It&apos;s given that it&apos;s balanced. So, if we encounter <code>)</code>, there will always be an opening bracket corresponding to it. We try to find that. Until we find it, just keep on popping and adding, then pop the opening bracket and substitute with <code>(2 * sum of all popped ones)</code> or <code>1</code> if the sum if zero.</p>
<pre><code class="lang-py"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span>:</span>
 <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">scoreOfParentheses</span><span class="hljs-params">(self, S: str)</span> -&gt; int:</span>
     <span class="hljs-comment"># [..(] )  = [..1]</span>
     <span class="hljs-comment"># [.(c1 c2 c3] )  = [.2*(c1+c2+c3)]</span>

     stack = []

     <span class="hljs-keyword">for</span> i, c <span class="hljs-keyword">in</span> enumerate(S):
         <span class="hljs-keyword">if</span> c == <span class="hljs-string">&apos;(&apos;</span>:
             stack.append(<span class="hljs-string">&apos;(&apos;</span>)
             <span class="hljs-keyword">continue</span>

         current = <span class="hljs-number">0</span>
         <span class="hljs-keyword">while</span> stack[<span class="hljs-number">-1</span>] != <span class="hljs-string">&apos;(&apos;</span>:
             val = stack.pop()
             current += val

         stack.pop()
         <span class="hljs-keyword">if</span> current == <span class="hljs-number">0</span>:
             stack.append(<span class="hljs-number">1</span>)
         <span class="hljs-keyword">else</span>:
             stack.append(current * <span class="hljs-number">2</span>)

     <span class="hljs-keyword">return</span> sum(stack)
</code></pre>
</li>
</ol>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="Intervals.html" class="navigation navigation-prev " aria-label="Previous page: Intervals">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="AlienDictionary.html" class="navigation navigation-next " aria-label="Next page: Alien Dictionary">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Parenthesis","level":"5.4","depth":1,"next":{"title":"Alien Dictionary","level":"5.5","depth":1,"path":"Miscellaneous/AlienDictionary.md","ref":"Miscellaneous/AlienDictionary.md","articles":[]},"previous":{"title":"Intervals","level":"5.3","depth":1,"path":"Miscellaneous/Intervals.md","ref":"Miscellaneous/Intervals.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["collapsible-menu","livereload"],"pluginsConfig":{"collapsible-menu":{},"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"Miscellaneous/Parenthesis.md","mtime":"2021-06-28T13:42:30.706Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-08-26T01:45:14.200Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-collapsible-menu/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

